var Napchart=function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){function n(e,t){return e.x>t[0].x&&e.x<t[1].x&&e.y<t[0].y&&e.y>t[2].y}function a(e,t){return e.map(function(e){return{x:e.x+t.x,y:e.y+t.y}})}var i=[];e.exports={string:function(e,t,n,a){i.some(function(a){return a.text==e&&a.x==t&&a.y==n})||i.push({text:e,x:t,y:n,style:a||{},id:i.length})},writeAll:function(e){function t(e,t){var n=e.corners[1].x-t.corners[0].x,i=e.corners[1].y-t.corners[3].y;return n<i?(e.corners=a(e.corners,{x:-n/2,y:0}),e.x-=n/2,t.corners=a(t.corners,{x:n/2,y:0}),t.x+=n/2):(e.corners=a(e.corners,{x:0,y:-i/2}),e.y-=i/2,t.corners=a(t.corners,{x:0,y:i/2}),t.y+=i/2),{a:e,b:t}}var r=e.ctx,o=e.helpers,s=e.config;i.forEach(function(t){var n=t.style.size||s.fontSize;r.font=o.fontSize(e,n);var a=r.measureText(t.text).width,i=n;t.style.background&&(a+=s.content.textBoxPadWidth,i*=1.8),t.corners=[{x:t.x-a/2,y:t.y+i/2},{x:t.x+a/2,y:t.y+i/2},{x:t.x+a/2,y:t.y-i/2},{x:t.x-a/2,y:t.y-i/2}]}),i.forEach(function(e,a){i.filter(function(a,i){return e.corners.some(function(i){if(n(i,a.corners)){var r=t(e,a);return e=r.a,a=r.b,!0}return!1})})}),i.forEach(function(t){var n=t.style.size||s.fontSize;if(r.font=o.fontSize(e,n),t.style.background){r.save();var a=r.measureText(t.text).width+s.content.textBoxPadWidth,i=1.8*n;r.fillStyle=t.style.background,r.globalAlpha=.7,t.style.roundedCorners?o.fillRectRounded(e,t.corners[3].x,t.corners[3].y,a,i):r.fillRect(t.corners[3].x,t.corners[3].y,a,i),r.restore()}r.fillStyle=t.style.color||s.fontColor,r.fillText(t.text,t.x,t.y)}),i=[]}}},function(e,t){e.exports=function(e,t){function n(e){0===Object.keys(c).length?c={up:e.y,down:e.y,left:e.x,right:e.x}:(e.y<c.up&&(c.up=e.y),e.y>c.down&&(c.down=e.y),e.x<c.left&&(c.left=e.x),e.x>c.right&&(c.right=e.x))}var t=Object.assign({},t),a=0;t.elements.forEach(function(e){"arc"===e.type&&(a+=e.radians)}),a==2*Math.PI?e.shapeIsContinous=!0:e.shapeIsContinous=!1,t.elements.forEach(function(e,n){e.startAngle=0===n?0:t.elements[n-1].endAngle,"arc"===e.type?e.endAngle=e.startAngle+e.radians:"line"===e.type&&(e.endAngle=e.startAngle)});var i=e.w;i-=120,t.elements.forEach(function(t,n){"arc"===t.type&&(i-=e.config.edgeRadius*(t.radians/Math.PI))}),i<0&&(i=0);var r=0;t.elements.forEach(function(t,n){"arc"===t.type?t.length=t.radians*e.config.baseRadius:"line"===t.type&&(t.length=i*(t.percent/100)),t.length=Math.round(t.length),r+=t.length});var o=0;t.elements.forEach(function(e,n){e.minutes=Math.floor(e.length/r*1440),o+=e.minutes,n==t.elements.length-1&&o<1440&&(o-=e.minutes,e.minutes=1440-o,o+=e.minutes)}),1440!=o&&console.warn("bad things might happen"),t.elements=t.elements.filter(function(e){return e.minutes>0}),t.elements.forEach(function(n,a){0===a?n.start=t.shift:a>0&&(n.start=t.elements[a-1].end),n.end=e.helpers.limit(n.start+n.minutes)});var s={x:e.w/2,y:e.h/2};t.elements.forEach(function(e,n){0===n?(e.startPoint=s,e.endPoint=s):"arc"===e.type?(e.startPoint=t.elements[n-1].endPoint,e.endPoint=t.elements[n-1].endPoint):"line"===e.type&&(e.startPoint=t.elements[n-1].endPoint),"line"===e.type&&(e.endPoint={x:e.startPoint.x+Math.cos(e.startAngle)*e.length,y:e.startPoint.y+Math.sin(e.startAngle)*e.length})});var c={};t.elements.forEach(function(e,t){n(e.startPoint),n(e.endPoint)}),c.down=e.h-c.down,c.right=e.w-c.right;var l=(c.left-c.right)/2,u=(c.up-c.down)/2;u-=t.shiftDown*e.ratio,t.elements.forEach(function(e,t){e.startPoint={x:e.startPoint.x-l,y:e.startPoint.y-u},e.endPoint={x:e.endPoint.x-l,y:e.endPoint.y-u}}),t.lanes=[];for(var d=e.data.lanes,f=t.maxLaneSize*e.ratio,h=t.laneMaxRadius*e.ratio,p=t.laneMinRadius*e.ratio,v=h-p,m=Math.min(f,v/d),g=v-m*d+p,y=0;y<d;y++)t.lanes.push({start:g+m*y,end:g+m*(y+1)});return t}},function(e,t,n){var a={};n(3)(a),n(4)(a),n(5)(a),n(6)(a),n(7)(a),n(8)(a),n(11)(a),n(25)(a),e.exports=a},function(e,t,n){"use strict";e.exports=function(e){var t=e.helpers={};t.duration=function(e,n){return t.limit(n-e)},t.range=function(e,n,a){return a?t.limit(e-n):t.limit(n-e)},t.minutesToHoursMinutes=function(e){var t=Math.floor(e/60)+"",n=e%60+"";return n=Math.floor(n),{hours:t,minutes:n}},t.minutesToReadable=function(e,n){var a;return void 0===n&&(n=60),e>n?(a=t.minutesToHoursMinutes(e),a.hours+"h "+a.minutes+"m"):e+"m"},t.middlePoint=function(e,n){var a=t.duration(e,n);return t.limit(e+a/2)},t.getProgressBetweenTwoValues=function(e,n,a){var i=t.duration(n,e)/t.duration(n,a);return isNaN(i)?1:i},t.getPositionBetweenTwoValues=t.getProgressBetweenTwoValues,t.limit=function(e){return 1440==e?1440:e-1440*Math.floor(e/1440)},t.shortestWay=function(e){return e>720?e-1440:e<-720?e+1440:e},t.minutesDistance=function(e,n){return Math.min(t.duration(e,n),t.duration(n,e))},t.isInside=function(e,t,n){if(n>t){if(e<n&&e>t)return!0}else if(t>n&&(e>t||e<n))return!0;return e==t||e==n},t.isInsideAngle=function(e,n,a){function i(e){return e%=2*Math.PI,e<0&&(e+=2*Math.PI),e}return t.isInside(i(e),i(n),i(a))},t.distance=function(e,t,n){var t=n.y-t,e=n.x-e;return Math.sqrt(t*t+e*e)},t.angleBetweenTwoPoints=function(e,n,a){var i=t.distance(e,n,a),n=(a.y-n)/i,e=(a.x-e)/i,r=Math.atan(n/e);return e>=0&&(r+=Math.PI),r+=Math.PI/2},t.minutesToClock=function(e){e=Math.floor(e);var t=Math.floor(e/60)+"";return e=e%60+"",1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),t+e},t.distanceFromPointToLineSegment=function(e,t,n,a){var i=n.x,r=n.y,o=a.x,s=a.y,c=e-i,l=t-r,u=o-i,d=s-r,f=c*u+l*d,h=u*u+d*d,p=-1;0!=h&&(p=f/h);var v,m;p<0?(v=i,m=r):p>1?(v=o,m=s):(v=i+p*u,m=r+p*d);var g=e-v,y=t-m;return Math.sqrt(g*g+y*y)},t.distanceFromPointToLine=function(e,t){return t-e},t.each=function(e,n,a,i){var r,o;if(t.isArray(e))if(o=e.length,i)for(r=o-1;r>=0;r--)n.call(a,e[r],r);else for(r=0;r<o;r++)n.call(a,e[r],r);else if("object"==typeof e){var s=Object.keys(e);for(o=s.length,r=0;r<o;r++)n.call(a,e[s[r]],s[r])}},t.deepEach=function(e,n){function a(e,n){if(t.isArray(e))for(var a=0;a<e.length;a++)n(e,e[a],a);else if("object"==typeof e)for(var i=Object.keys(e),a=0;a<i.length;a++)n(e,e[i[a]],i[a])}function i(e,r,o){t.isArray(r)||"object"==typeof r?a(r,i):n(e,r,o)}a(e,i)},t.clone=function(e){return JSON.parse(JSON.stringify(e))},t.extend=function(e){for(var n=arguments,a=function(t,n){e[n]=t},i=1,r=arguments.length;i<r;i++)t.each(n[i],a);return e},t.uid=function(){var e=0;return function(){return e++}}();var n=t.easingEffects={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0===e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1===e?1:1*(1-Math.pow(2,-10*e/1))},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:1==(e/=1)?1:(n||(n=.3),a<Math.abs(1)?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),-a*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n))},easeOutElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:1==(e/=1)?1:(n||(n=.3),a<Math.abs(1)?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),a*Math.pow(2,-10*e)*Math.sin((1*e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:2==(e/=.5)?1:(n||(n=.3*1.5*1),a<Math.abs(1)?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),e<1?a*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)*-.5:a*Math.pow(2,-10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-n.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?7.5625*e*e*1:e<2/2.75?1*(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return e<.5?.5*n.easeInBounce(2*e):.5*n.easeOutBounce(2*e-1)+.5}};t.isArray=Array.isArray?function(e){return Array.isArray(e)}:function(e){return"[object Array]"===Object.prototype.toString.call(e)}}},function(e,t){e.exports=function(e){var t=e.helpers;t.strokeSegment=function(e,n,a,i){var r=e.ctx;r.save(),r.strokeStyle=i.color,r.lineWidth=e.config.bars.general.stroke.lineWidth,r.lineJoin="mittel",t.createSegment(e,i.outerRadius,i.innerRadius,n,a),r.stroke(),r.restore()},t.colorMap=function(e,t){return t.includes("#")?t:e.config.colorMap[t]},t.fillRectRounded=function(e,t,n,a,i){var r=e.config.cornerRadius,o=e.ctx;o.save(),o.strokeStyle=o.fillStyle,o.lineJoin="round",o.lineWidth=r,o.strokeRect(t+r/2,n+r/2,a-r,i-r),o.restore()},t.circle=function(e,t,n){var a=e.ctx;a.beginPath(),a.arc(t.x,t.y,n,0,2*Math.PI),a.closePath()},t.fillCircle=function(e,t,n){var a=e.ctx;this.circle(e,t,n),a.fill()},t.fontSize=function(e,t){return t+"px "+e.config.font}}},function(e,t){e.exports=function(e){var t=e.helpers;t.XYtoInfo=function(e,n,a){var i,r,o=e.shape,s=o.elements.find(function(e){if("arc"===e.type){var i=t.angleBetweenTwoPoints(n,a,e.startPoint);if(i>=e.startAngle&&i<=e.endAngle)return!0}else if("line"===e.type){var r=t.angleBetweenTwoPoints(n,a,e.startPoint),o=t.angleBetweenTwoPoints(n,a,e.endPoint);if(t.isInsideAngle(r,e.startAngle,e.startAngle+Math.PI/2)&&t.isInsideAngle(o,e.startAngle-Math.PI/2,e.startAngle))return!0}return!1});void 0===s&&(s=o.elements.reduce(function(e,i){if("line"===i.type){var r=t.distanceFromPointToLineSegment(n,a,i.startPoint,i.endPoint);if(r<e.distance)return Object.assign({},i,{distance:r})}return e},{distance:1440,initial:!0}));var c;if("arc"===s.type){var l=t.angleBetweenTwoPoints(n,a,s.startPoint);c=t.getProgressBetweenTwoValues(l,s.startAngle,s.endAngle)}else if("line"===s.type){var u=t.distanceFromPointToLineSegment(n,a,s.startPoint,s.endPoint),d=t.distance(n,a,s.startPoint),f=Math.sqrt(d*d-u*u);c=f/s.length,isNaN(c)&&(c=0)}var i=t.duration(s.start,s.end)*c+s.start;if(i=Math.min(i,1440),"arc"===s.type?r=t.distance(n,a,s.startPoint):"line"===s.type&&(r="line"==e.data.shape?t.distanceFromPointToLine(a,s.startPoint.y):t.distanceFromPointToLineSegment(n,a,s.startPoint,s.endPoint)),isNaN(i)||isNaN(r))throw new"ouch";var h=e.shape.lanes,p=h.findIndex(function(e){return r>e.start&&r<e.end});return{minutes:i,distance:r,lane:p}},t.minutesToXY=function(e,n,a){var i=(e.ctx,e.shape),n=t.limit(n),r=i.elements.find(function(e){return t.isInside(n,e.start,e.end)});if(void 0===r)throw console.warn(Object.assign({},e.shape),n,a),new"shapeElement==undefined";var o=t.getProgressBetweenTwoValues(n,r.start,r.end);if("line"===r.type)var s={x:r.startPoint.x+Math.cos(r.startAngle)*o*r.length,y:r.startPoint.y+Math.sin(r.startAngle)*o*r.length},c={x:s.x+Math.cos(r.startAngle-Math.PI/2)*a,y:s.y+Math.sin(r.startAngle-Math.PI/2)*a};else if("arc"===r.type)var l=r.startPoint,u=o*r.radians,c={x:l.x+Math.cos(r.startAngle+u-Math.PI/2)*a,y:l.y+Math.sin(r.startAngle+u-Math.PI/2)*a};return c},t.createCurve=function(e,n,a,i,r,o){function s(n,a){var o=t.clone(e.shape);r&&o.elements.reverse(),n=t.limit(n),a=t.limit(a);var s,l;o.elements.forEach(function(e,i){t.isInside(n,e.start,e.end)&&(s=i),t.isInside(a,e.start,e.end)&&(l=i)});var u,d=[],f=!1;if(u=r?{start:1,end:0}:{start:0,end:1},void 0===s||void 0===l)throw console.log(o,n,a),"error: something is not right here";for(var h=s;h<o.elements.length;h++){var p={shapeElement:o.elements[h],start:u.start,end:u.end};if(h==s&&(p.start=t.getPositionBetweenTwoValues(n,o.elements[h].start,o.elements[h].end)),h==l&&(p.end=t.getPositionBetweenTwoValues(a,o.elements[h].start,o.elements[h].end)),(h==s&&h==l&&p.end>p.start&&r||p.end<p.start&&!r)&&(0==d.length?(p.end=u.end,f=!0):p.start=u.start),d.push(p),h==l){if(!f)break;f=!1}h==o.elements.length-1&&(h=-1)}d.forEach(function(n,a){var o=n.shapeElement;if("arc"===o.type){var s=o.startAngle-Math.PI/2,l=s+n.start*o.radians,u=s+n.end*o.radians;c.arc(o.startPoint.x,o.startPoint.y,i,l,u,r)}else if("line"===o.type){var d=t.minutesToXY(e,o.start+o.minutes*n.start,i),f=t.minutesToXY(e,o.start+o.minutes*n.end,i);c.lineTo(d.x,d.y),c.lineTo(f.x,f.y)}})}var c=e.ctx;if(void 0===r)var r=!1;void 0===o?s(n,a):!e.shapeIsContinous&&n>a?(s(n,1440),o(),e.ctx.beginPath(),s(0,a),o()):(s(n,a),o())},t.createSegment=function(e,n,a,i,r,o){function s(i,r){var o=e.ctx;o.beginPath(),t.createCurve(e,i,r,n),t.createCurve(e,r,i,a,!0),o.closePath()}void 0===o?s(i,r):!e.shapeIsContinous&&i>r?(s(i,1440),o(),s(0,r),o()):(s(i,r),o())}}},function(e,t){e.exports=function(e){e.config={interaction:!0,penMode:!0,baseRadius:32,edgeRadius:42,font:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',fontSize:2,fontColor:"#aaaaaa",background:"transparent",cornerRadius:3,text:!0,drawFace:!0,paddingLanes:.4,face:{stroke:.15,weakStrokeColor:"#dddddd",weakerStrokeColor:"#f5f5f5",strokeColor:"#aaaaaa",importantStrokeColor:"black",importantLineWidth:.3,numbers:{distance:6,color:"#262626",size:3.3}},content:{handleTimes:{distance:2.5,fontSize:1.75,color:"#999999"},handles:.6,bigHandles:1.4,textDistance:3,textBoxPadWidth:.9},handlesClickDistance:3,defaultColor:"red",colorMap:{red:"#EA4335",blue:"#4285F4",brown:"#B15911",green:"#34A853",gray:"#949494",yellow:"#FBBC05",purple:"#730B73",pink:"#ff94d4",white:"#ffffff"},colorTagsSize:2}}},function(e,t){e.exports=function(e){function t(e){var t=e.canvas;a(e),e.width=e.w=t.width,e.height=e.h=t.height,e.ratio=Math.min(e.w/90,e.h/90),e.config=o(e.unScaledConfig,e.ratio)}function n(t){t.needFullRedraw?(e.draw.fullDraw(t),t.needFullRedraw=!1,t.onUpdate()):e.draw.drawFrame(t)}function a(e){if("undefined"!=typeof window){var t=e.canvas,n=window.devicePixelRatio,a=t.parentNode,i=a.offsetWidth,r=a.offsetHeight;t.width=n*i,t.height=n*r,t.style.width="100%",t.style.height="100%"}}function i(t){return t=t||{},t=s.extend(JSON.parse(JSON.stringify(e.config)),t)}function r(e,t){function n(){return Math.round(1e4*Math.random())}return e.map(function(e){if(void 0===e.start||void 0===e.end)throw new Err("Start and End properties are required!");var e={start:e.start,end:e.end,id:e.id||n(),lane:e.lane||0,text:e.text||"",color:e.color||t.config.defaultColor};return e.lane>t.shape.lanes.length-1&&console.log("Lane no. "+e.lane+" does not exist in this chart"),e})}function o(e,t){function n(e,n,a){(n>1||n<1||1===n)&&(e[a]=n*t)}var a=s.clone(e);return s.deepEach(a,n),a}var s=e.helpers;e.init=function(a,o,c){var l={setHover:function(e,t){this.hoverElement={id:e,type:t},n(this)},isHover:function(e,t){return this.hoverElement.id==e&&this.hoverElement.type==t},isActive:function(e,t){return this.activeElement.elementId==e&&this.activeElement.type==t},setActive:function(e){this.activeElement=e},removeActive:function(){this.activeElement={},n(this)},removeHover:function(){this.hoverElement={},n(this)},setSelected:function(e){this.selectedElement=e,this.onUpdate(),this.onSetSelected(e),n(this)},isSelected:function(e){return this.selectedElement==e},deselect:function(){this.selectedElement=!1,this.onUpdate(),this.onSetSelected(!1),n(this)},setNumberOfLanes:function(t){this.data.lanes=t,l.needFullRedraw=!0,e.shape.initShape(l),n(this)},isPen:function(){return l.config.penMode&&0==Object.keys(this.hoverElement).length&&0==Object.keys(this.activeElement).length&&this.mousePenLocation},setShape:function(e){},animateShape:function(e){},initAndAddElements:function(e){e=r(e,l),this.data.elements=this.data.elements.concat(e),this.draw()},setElements:function(e){var t=this.helpers;e=e.map(function(e){return Object.assign({},e,{start:t.limit(e.start),end:t.limit(e.end)})}),this.data.elements=e,this.draw()},updateElement:function(e){this.data.elements=this.data.elements.map(function(t){return t.id==e.id?Object.assign(t,e):t}),n(this)},deleteElement:function(e){this.data.elements=this.data.elements.filter(function(t){return t.id!=e}),this.isSelected(e)&&this.deselect(),n(this)},emptyLane:function(e){console.log(e),this.data.elements=this.data.elements.filter(function(t){return t.lane!=e}),console.log(this.data.elements)},createElement:function(e){var t=r([e],this)[0];return l.data.elements.push(t),n(this),t},changeColor:function(e,t){this.data.elements=this.data.elements.map(function(n){return n.id==e?Object.assign({},n,{color:t}):n}),n(this)},colorTag:function(e,t){if(""==t)return this.data.colorTags=this.data.colorTags.filter(function(t){return t.color!=e});void 0===this.data.colorTags.find(function(t){return t.color==e})&&this.data.colorTags.push({color:e}),this.data.colorTags=this.data.colorTags.map(function(n){return n.color==e?Object.assign({},n,{tag:t}):n}),n(this)},draw:function(){n(l)},benchmark:function(){e.draw.benchmark(this)},onSetSelected:function(){},onUpdate:function(){},update:function(e){l.data=e,n(l),console.log("updating")},updateDimensions:function(){t(l),l.needFullRedraw=!0,e.shape.initShape(l),n(this)},changeShape:function(t){e.shape.changeShape(l,t),this.data.shape=t},whichLaneIsTheLastOccupied:function(){var e=0;return l.shape.lanes.forEach(function(t,n){l.data.elements.filter(function(e){return e.lane==n}).length>0&&(e=n)}),e}},u={elements:[],colorTags:[],shape:"circle",lanes:1};return l.ctx=a,l.canvas=a.canvas,l.unScaledConfig=i(c),t(l),l.data=s.extend(u,o),l.hoverElement={},l.activeElement={},l.selectedElement=!1,l.mousePenLocation=!1,l.needFullRedraw=!0,l.isTouchUser=!1,l.helpers=e.helpers,l.styles=e.styles,e.shape.initShape(l),e.interactCanvas.init(l),l.data.elements=r(l.data.elements,l),n(l),l}}},function(e,t,n){var a=function(e){for(var t in e){var n=e[t];e[t]=Object.assign({},n,{laneMaxRadius:n.laneMaxRadius||36,laneMinRadius:n.laneMinRadius||16,maxLaneSize:n.maxLaneSize||14,shiftDown:n.shiftDown||0,shift:n.shift||0,centerMinutes:n.centerMinutes||0})}return e}(n(9)),i=n(1),r=n(10);e.exports=function(e){function t(e,t){"string"==typeof t&&(o=t,t=a[t]),e.shape=i(e,t)}function n(e,t){function n(){var t=s.clone(a[i]),l=s.clone(a[o[c]]),u={count:o.length};r(e,t,l,u,function(){i=o[c],++c<o.length&&n()})}var i=e.data.shape,o=[t];"circle"==i?"line"==t&&(o=["transitionShape","line"]):"wide"==i?"line"==t&&(o=["circle","transitionShape","line"]):"line"==i&&("wide"==t?o=["transitionShape","circle","wide"]:"circle"==t&&(o=["transitionShape","circle"]));var c=0;n()}var o,s=e.helpers;e.shape={initShape:function(e){t(e,e.data.shape)},changeShape:function(e,t){n(e,t)}}}},function(e,t){e.exports={miniCircle:{elements:[{type:"arc",radians:Math.PI},{type:"line",percent:0},{type:"arc",radians:Math.PI},{type:"line",percent:0}],laneMinRadius:16},circle:{elements:[{type:"arc",radians:Math.PI},{type:"line",percent:0},{type:"arc",radians:Math.PI},{type:"line",percent:0}]},line:{elements:[{type:"line",percent:100}],laneMaxRadius:60,laneMinRadius:0,maxLaneSize:20,shiftDown:30,centerMinutes:720},wide:{elements:[{type:"arc",radians:Math.PI},{type:"line",percent:100},{type:"arc",radians:Math.PI},{type:"line",percent:100}],shift:0,centerMinutes:1350},transitionShape:{elements:[{type:"arc",radians:Math.PI/6}]}}},function(e,t,n){var a=n(1);e.exports=function(e,t,n,i,r){function o(){var t=Date.now(),i=Math.min(1,(t-d)/u);i=s(i),n.elements.forEach(function(e,t){var n=e.animation.end-e.animation.start;e[e.animation.property]=e.animation.start+n*i}),n.propAnimations.forEach(function(e){n[e.prop]=e.start+e.duration*i}),e.shape=a(e,n),e.needFullRedraw=!0,e.draw(),i<1?window.requestAnimationFrame(o):r()}function s(e){return c.easingEffects.easeInOutQuad(e)}var c=e.helpers;n.elements.forEach(function(e){if("line"==e.type)var n="percent";else var n="radians";var a=t.elements.find(function(n,a){if(e.type===n.type)return t.elements.splice(a,1)});void 0===a&&(a={type:e.type},a[n]=0),e.animation={start:a[n],end:e[n],property:n}}),t.elements.forEach(function(e){if("line"==e.type)var t="percent";else var t="radians";n.elements.push({type:e.type,animation:{start:e[t],end:0,property:t}})});var l=["shift","shiftDown","laneMinRadius","laneMaxRadius","maxLaneSize","centerMinutes"];n.propAnimations=l.map(function(e){return{prop:e,start:t[e],end:n[e],duration:n[e]-t[e]}});var u=350,d=Date.now();o()}},function(e,t,n){e.exports=function(e){function t(e){var t=e.ctx;if(t.font=e.config.fontSize+"px "+e.config.font,t.textAlign="center",t.textBaseline="middle",o(e),"undefined"==typeof document)c.forEach(function(t){t(e,e.ctx)}),s.forEach(function(t){t(e,e.ctx)});else{e.ocanvas=document.createElement("canvas"),e.ocanvas.width=e.width,e.ocanvas.height=e.height;var n=e.ocanvas.getContext("2d"),i=Object.assign({},e,{ctx:n});c.forEach(function(e){e(i,n)}),a(e)}}function a(t){o(t),s.forEach(function(n){n(t,e)})}function i(t){var n=Date.now();for(task in s){for(var a=Date.now(),i=0;i<1e3;i++)s[task](t,e);var r=Date.now();console.log(task+" x 1000 "+(r-a)+" ms")}var o=Date.now();console.log("Total: "+(o-n)+" ms"),console.log("One round: "+(o-n)/1e3+" ms")}var r=n(0);e.draw={fullDraw:t,drawFrame:a,benchmark:i};var o=n(12),s=[function(e){void 0!==e.ocanvas&&e.ctx.drawImage(e.ocanvas,0,0)},n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),r.writeAll],c=[n(21),n(22),n(23),n(24)]}},function(e,t){e.exports=function(e){e.ctx.clearRect(0,0,e.w,e.h)}},function(e,t){e.exports=function(e){var t=e.ctx,n=e.helpers,a=e.config;e.data.elements.forEach(function(i){var r=e.shape.lanes[i.lane];t.save(),t.fillStyle=n.colorMap(e,i.color),e.isActive(i.id,"middle")&&(t.globalAlpha=.9),n.createSegment(e,r.end-a.paddingLanes,r.start+a.paddingLanes,i.start,i.end,function(){t.fill()}),t.restore()})}},function(e,t){e.exports=function(e){var t=e.ctx,n=e.helpers,a=e.config,i=e.data,r=i.elements.find(function(t){return t.id==e.selectedElement});if(void 0!==r){var o=e.shape.lanes[r.lane];t.save();["start","end"].forEach(function(i){var s=n.minutesToXY(e,r[i],o.end-a.paddingLanes);t.globalAlpha=.5,t.fillStyle=n.colorMap(e,r.color),n.circle(e,s,a.content.handles),t.fill(),(e.isHover(r.id,i)||e.isActive(r.id,i))&&(t.globalAlpha=.2,t.fillStyle=n.colorMap(e,r.color),n.circle(e,s,a.handlesClickDistance),t.fill())}),t.restore()}}},function(e,t,n){var a=n(0);e.exports=function(e){var t=e.ctx,n=e.helpers,i=e.config;i.text&&e.data.elements.forEach(function(r){var o=e.shape.lanes[r.lane];t.save(),["start","end"].forEach(function(s){var c=i.content.handleTimes,l=o.end+c.distance;if(0==r.lane)var l=o.start-c.distance;t.fillStyle=c.color;var u=n.minutesToXY(e,r[s],l);a.string(n.minutesToClock(r[s]),u.x,u.y,{size:i.content.handleTimes.fontSize,color:i.content.handleTimes.color})}),t.restore()})}},function(e,t,n){var a=n(0);e.exports=function(e){var t=e.ctx,n=e.helpers;e.config.text&&e.data.elements.forEach(function(i){if(0!=i.text.length){var r=e.shape.lanes[i.lane];t.save();var o=n.middlePoint(i.start,i.end);n.duration(i.start,i.end)<90&&(o=Math.max(o,i.start+40));var s=r.end+e.config.content.textDistance;if(0==i.lane)var s=r.start-e.config.content.textDistance;var c=n.minutesToXY(e,o,s);a.string(i.text,c.x,c.y,{size:e.config.fontSize,color:"white",background:n.colorMap(e,i.color)}),t.restore()}})}},function(e,t,n){var a=n(0);e.exports=function(e){var t=e.ctx,n=e.helpers,i=e.config;i.text&&e.data.elements.forEach(function(r){var o=e.shape.lanes[r.lane];t.save();var s=n.middlePoint(r.start,r.end),c=(o.start+o.end)/2,l=n.minutesToXY(e,s,c),u=n.minutesToReadable(n.duration(r.start,r.end));a.string(u,l.x,l.y,{size:i.content.handleTimes.fontSize,color:"white",background:n.colorMap(e,r.color),roundedCorners:!0}),t.restore()})}},function(e,t){e.exports=function(e){function t(t){var r=e.shape.lanes[t[0].lane];n.save(),n.fillStyle=i.face.strokeColor,t=t.sort(function(e,t){return e.start-t.start}),n.strokeStyle=i.face.weakStrokeColor;var o=[];t.forEach(function(e,n){if(n==t.length-1)var a=t[0];else var a=t[n+1];o.push({start:e.end,end:a.start})});var s=r.start+(r.end-r.start)/3,c=r.start+2*(r.end-r.start)/3;o.forEach(function(t){var i=a.duration(t.start,t.end),r=a.minutesToReadable(i,120);if(i>=60){var o=a.limit(t.start+15),l=a.limit(t.end-15),u=a.limit(o+i/2);n.beginPath(),a.createCurve(e,o,l,s,!1,function(){n.stroke()});var d=a.minutesToXY(e,u-10,c);n.fillText(r,d.x,d.y)}}),n.restore()}var n=e.ctx,a=e.helpers,i=e.config;e.shape.lanes.forEach(function(n,a){var i=e.data.elements.filter(function(e){return e.lane==a});i.forEach(function(n){e.isSelected(n.id)&&t(i)})})}},function(e,t){e.exports=function(e){var t=e.ctx,n=e.helpers,a=e.config;if(e.isPen()){var i=e.mousePenLocation.minutes,r=e.shape.lanes[e.mousePenLocation.lane];t.save(),t.fillStyle=e.config.defaultColor,t.globalAlpha=.5;var o=n.limit(i-1),s=n.limit(i+1);n.createSegment(e,r.end-a.paddingLanes,r.start+a.paddingLanes,o,s,function(){t.fill()}),t.restore()}}},function(e,t,n){var a=n(0);e.exports=function(e){var t=e.ctx,n=e.helpers,i=e.config;t.save(),t.fillStyle="black",console.log(e.shape.laneMinRadius/2);var r=n.minutesToXY(e,e.shape.centerMinutes,e.shape.lanes[0].start-e.shape.laneMinRadius/2*e.ratio);e.data.colorTags.forEach(function(o){r.y+=1.5*i.colorTagsSize;var s=e.data.elements.reduce(function(e,t){return t.color==o.color?e+n.duration(t.start,t.end):e},0),c=o.tag+": "+n.minutesToReadable(s);a.string(c,r.x,r.y,{size:i.colorTagsSize,color:"black"});var l=i.colorTagsSize,u=t.measureText(c).width,d={x:r.x-u/2-l-i.colorTagsSize/2,y:r.y-i.colorTagsSize/2};t.save(),t.fillStyle=n.colorMap(e,o.color),t.fillRect(d.x,d.y,l,l),t.restore()}),t.restore()}},function(e,t){e.exports=function(e,t){"transparent"!=e.config.background&&(t.save(),t.fillStyle=e.config.background,t.fillRect(0,0,e.w,e.h),t.restore())}},function(e,t){e.exports=function(e,t){var n=e.shape.lanes,a=e.helpers;if(e.config.drawFace){t.lineWidth=e.config.face.stroke,t.strokeStyle=e.config.face.strokeColor,t.save(),t.strokeStyle=e.config.face.weakerStrokeColor;for(var i=0;i<n.length-1;i++)t.beginPath(),a.createCurve(e,.01,1439.9,n[i].end),t.stroke(),t.setLineDash([]);t.restore(),t.beginPath(),a.createCurve(e,.01,1439.9,n[0].start),t.stroke(),t.beginPath(),a.createCurve(e,.01,1439.9,n[n.length-1].end),t.stroke()}}},function(e,t){e.exports=function(e,t){var n=e.helpers,a=e.config,i=e.shape.lanes;if(a.drawFace){t.lineWidth=a.face.stroke,t.save(),t.strokeStyle=a.face.weakStrokeColor,t.setLineDash([2,4]),t.beginPath();for(var r=0;r<=24;r++)if(24!=r||!e.shapeIsContinous){var o=n.minutesToXY(e,60*r,i[0].start),s=n.minutesToXY(e,60*r,i[i.length-1].end);t.moveTo(o.x,o.y),t.lineTo(s.x,s.y)}t.stroke(),t.setLineDash([]),t.restore()}}},function(e,t){e.exports=function(e,t){var n=e.helpers,a=e.config;if(a.drawFace){t.save(),t.font=n.fontSize(e,a.face.numbers.size),t.fillStyle=a.face.numbers.color,t.textAlign="center",t.textBaseline="middle";for(var i=e.shape.lanes[e.shape.lanes.length-1],r=0;r<=24;r+=4){if(24==r&&e.shapeIsContinous)return;var o=n.minutesToXY(e,60*r,i.end+a.face.numbers.distance);t.fillText(r,o.x,o.y)}t.restore()}}},function(e,t,n){var a=n(26),i=n(27);e.exports=function(e){function t(e,t){y=f(e);var n=a(t,h(y,t));if(e.stopPropagation(),e.preventDefault(),0==Object.keys(n).length)return c(e,t),t.isPen()&&r(e,t),void m(t);t.setActive(n),v(t,n.elementId),l(t)}function n(e){m(e)}function r(e,t){c(e,t),t.listeningForPenMove=!0}function o(e,t){var n=t.helpers;y=f(e);var i=h(y,t);if(t.listeningForPenMove){var r=t.mousePenLocation.minutes,o=n.XYtoInfo(t,i.x,i.y),s=o.minutes,d=n.duration(r,s);if(!(d>10&&d<1430))return;var v=d>720?"start":"end",m="end"==v?"start":"end",g={lane:t.mousePenLocation.lane};if(g[m]=r,g[v]=p(s),u(t,g.start,g.end,g.lane))return;var x=t.createElement(g);t.setActive({elementId:x.id,type:v}),t.setSelected(x.id),t.listeningForPenMove=!1}var w=a(t,i);0==Object.keys(w).length?(c(e,t),t.removeHover()):t.setHover(w.elementId,w.type),l(t)}function s(e,t){if(Object.keys(t.activeElement).length>0){var n=t.activeElement.elementId,a=t.data.elements.find(function(e){return e.id==n});0==g.duration(a.start,a.end)&&t.deleteElement(n)}x&&(v(t,x),x=!1),t.removeActive(),t.listeningForPenMove=!1,t.onUpdate()}function c(e,t){y=f(e);var n=h(y,t),a=t.helpers,i=a.XYtoInfo(t,n.x,n.y);-1==i.lane?t.mousePenLocation=!1:t.mousePenLocation={minutes:p(i.minutes),lane:i.lane}}function l(e){var t=e.activeElement;if(Object.keys(t).length>0){var n=h(y,e),a=g.XYtoInfo(e,n.x,n.y);!function(t,n){var a=e.data.elements.find(function(e){return e.id==t.elementId}),i={id:a.id};if("middle"==t.type){var r=n.distance,o=e.shape.lanes,s=o.findIndex(function(e,t){return r>e.start&&r<=e.end||0===t&&r<=e.start||t===o.length-1&&r>e.end||void 0});if(s!=a.lane){var c=u(e,a.start,a.end,s,a.id);c||(i.lane=s)}}if("start"==t.type||"end"==t.type){var l=p(Math.round(n.minutes));if("start"==t.type)var f=l,h=a.end;else var f=a.start,h=l;var c=d(e,f,h,a.lane,a.id,t.type);c&&(l="start"==t.type?g.duration(l,c.end)>720?h:c.end:g.duration(c.start,l)>720?f:c.start),a[t.type]!=l&&(i[t.type]=l)}else{a.duration=g.duration(a.start,a.end);var v=t.positionInElement;void 0===v&&(v=a.duration/2);var f=p(g.limit(Math.round(n.minutes-v))),h=g.limit(f+a.duration),c=u(e,f,h,a.lane,a.id);if(c){var m=e.data.elements.filter(function(e){return e.lane==c.lane&&e.id!=a.id}).sort(function(e,t){return e.start-t.start}),y=g.limit(n.minutes-v+a.duration/2),x=m.map(function(e,t){return t==m.length-1?{start:e.end,end:m[0].start}:{start:e.end,end:m[t+1].start}}).map(function(e){return e.space=g.duration(e.start,e.end),e}).filter(function(e){return e.space>=a.duration}),w=x.reduce(function(e,t){var n=g.minutesDistance(t.start,y),a=g.minutesDistance(t.end,y);if(n<a)var i="start",r=n;else var i="end",r=a;return r<e.distance?Object.assign({},t,{distance:r,startOrEnd:i}):e},{distance:1440});"start"==w.startOrEnd?(f=w.start,h=f+g.duration(a.start,a.end)):(h=w.end,f=h-g.duration(a.start,a.end))}window.chart=e,a.start==f&&a.end==h||(i.start=g.limit(f),i.end=g.limit(h))}Object.keys(i).length>1&&e.updateElement(i)}(t,a)}}function u(e,t,n,a,i){var r=e.data.elements.find(function(e){return i!=e.id&&((g.isInside(e.start+1,t,n)||g.isInside(e.end-1,t,n)||g.isInside(t,e.start+1,e.end-1))&&e.lane===a)});return void 0!==r&&r}function d(e,t,n,a,i,r){var o="end"==r?"start":"end";if(e.data.elements.some(function(e){return i!=e.id&&((g.isInside(e.start+1,t,n)||g.isInside(e.end-1,t,n)||g.isInside(t,e.start+1,e.end-1))&&e.lane===a)})){var s={start:t,end:n};return e.data.elements.reduce(function(e,t){if(i==t.id)return e;var n="start"==r,a=g.range(s[o],t[o],n);return a<e.distance?Object.assign({},t,{distance:a}):e},{distance:1440})}return!1}function f(e){return void 0!==e.touches?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}function h(e,t){var n=t.canvas.getBoundingClientRect(),a="undefined"!=typeof window?window.devicePixelRatio:1;return{x:(e.x-n.left)*a,y:(e.y-n.top)*a}}function p(e){return 5*Math.round(e/5)}function v(e,t){e.setSelected(t)}function m(e,t){void 0===t&&e.deselect(),e.deselect(t)}var g=e.helpers;e.interactCanvas={init:function(e){function a(e,t,n){t.split(" ").forEach(function(t){e.addEventListener(t,n)})}e.config.interaction&&(window.addEventListener("touchstart",function t(){e.isTouchUser=!0,window.removeEventListener("touchstart",t,!0)},!0),a(document,"mousemove touchmove",function(t){e.data.activeElement&&(t.stopPropagation(),t.preventDefault()),o(t,e)}),a(e.canvas,"mousedown touchstart",function(n){t(n,e)}),a(window,"mousedown touchstart",function(t){t.target!=e.canvas&&(t.target.classList.contains("napchartDontLoseFocus")?x=e.selectedElement:n(e))}),a(window,"mouseup touchend",function(t){s(t,e)}),i.init(e))}};var y,x}},function(e,t){e.exports=function(e,t){var n,a=(e.canvas,e.data),i=e.helpers,r={};if(a.elements.forEach(function(a){var o=e.shape.lanes[a.lane];e.isSelected(a.id)&&["start","end"].forEach(function(s){var c=i.minutesToXY(e,a[s],o.end);(n=i.distance(c.x,c.y,t))<e.config.handlesClickDistance&&(void 0===r.distance||n<r.distance)&&(r={elementId:a.id,type:s,distance:n})})}),0==Object.keys(r).length){var o=i.XYtoInfo(e,t.x,t.y);if(!o)return{};a.elements.forEach(function(t){var n=e.shape.lanes[t.lane];if(i.isInside(o.minutes,t.start,t.end)){var a=n.start,s=n.end;o.distance>a&&o.distance<s&&(r={elementId:t.id,type:"middle",positionInElement:o.minutes-t.start})}})}return r}},function(e,t){e.exports={init:function(e){function t(t){var a=e.data.elements.find(function(e){return e.id==t});i.value=a.text,i.focus(),n(i,a),i.oninput=function(t){var n=t.target.value;e.updateElement({id:e.selectedElement,text:n})}}function n(t,n){var a=e.helpers,i=e.shape.lanes[n.lane],r=a.middlePoint(n.start,n.end);a.duration(n.start,n.end)<90&&(r=Math.max(r,n.start+40));var o=i.end+e.config.content.textDistance;if(0==n.lane)var o=i.start-e.config.content.textDistance;var s=a.minutesToXY(e,r,o);console.log(s),t.value=n.text}var a=e.canvas.parentElement,i=document.createElement("input");i.style.position="absolute",i.className="hiddenInput",i.style.width="100px",i.style.zIndex=0,i.style.top="0",i.style.left="0",i.type="text",a.appendChild(i),e.forceFocusSelected=function(){t(e.selectedElement)},e.onSetSelected=function(n){if(!n)return console.log("fdsjisjaf"),i.value="",i.blur(),"get out of here";e.isTouchUser||t(n)},document.onkeydown=function(t){t=t||window.event,46==t.keyCode&&e.selectedElement&&i===document.activeElement&&e.deleteElement(e.selectedElement)}}}}]);