var Napchart=function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){function n(e,t){return e.x>t[0].x&&e.x<t[1].x&&e.y<t[0].y&&e.y>t[2].y}function a(e,t){return e.map(function(e){return{x:e.x+t.x,y:e.y+t.y}})}var i=[];e.exports={string:function(e,t,n,a){i.some(function(a){return a.text==e&&a.x==t&&a.y==n})||i.push({text:e,x:t,y:n,style:a||{},id:i.length})},writeAll:function(e){function t(e,t){var n=e.corners[1].x-t.corners[0].x,i=e.corners[1].y-t.corners[3].y;return n<i?(e.corners=a(e.corners,{x:-n/2,y:0}),e.x-=n/2,t.corners=a(t.corners,{x:n/2,y:0}),t.x+=n/2):(e.corners=a(e.corners,{x:0,y:-i/2}),e.y-=i/2,t.corners=a(t.corners,{x:0,y:i/2}),t.y+=i/2),{a:e,b:t}}var r=e.ctx,o=e.helpers,s=e.config;i.forEach(function(t){var n=t.style.size||s.fontSize;r.font=o.fontSize(e,n);var a=r.measureText(t.text).width,i=n;t.style.background&&(a+=s.content.textBoxPadWidth,i*=1.8),t.corners=[{x:t.x-a/2,y:t.y+i/2},{x:t.x+a/2,y:t.y+i/2},{x:t.x+a/2,y:t.y-i/2},{x:t.x-a/2,y:t.y-i/2}]}),i.forEach(function(e,a){i.filter(function(a,i){return e.corners.some(function(i){if(n(i,a.corners)){var r=t(e,a);return e=r.a,a=r.b,!0}return!1})})}),i.forEach(function(t){var n=t.style.size||s.fontSize;if(r.font=o.fontSize(e,n),t.style.background){r.save();var a=r.measureText(t.text).width+s.content.textBoxPadWidth,i=1.8*n;r.fillStyle=t.style.background,r.globalAlpha=.7,t.style.roundedCorners?o.fillRectRounded(e,t.corners[3].x,t.corners[3].y,a,i):r.fillRect(t.corners[3].x,t.corners[3].y,a,i),r.restore()}r.fillStyle=t.style.color||s.fontColor,r.fillText(t.text,t.x,t.y)}),i=[]}}},function(e,t){e.exports=function(e,t){function n(e){0===Object.keys(c).length?c={up:e.y,down:e.y,left:e.x,right:e.x}:(e.y<c.up&&(c.up=e.y),e.y>c.down&&(c.down=e.y),e.x<c.left&&(c.left=e.x),e.x>c.right&&(c.right=e.x))}var t=e.helpers.clone(t),a=0;t.elements.forEach(function(e){"arc"===e.type&&(a+=e.radians)}),a==2*Math.PI?e.shapeIsContinous=!0:e.shapeIsContinous=!1,t.elements.forEach(function(e,n){e.startAngle=0===n?0:t.elements[n-1].endAngle,"arc"===e.type?e.endAngle=e.startAngle+e.radians:"line"===e.type&&(e.endAngle=e.startAngle)});var i=e.w;i-=120,t.elements.forEach(function(t,n){"arc"===t.type&&(i-=e.config.edgeRadius*(t.radians/Math.PI))}),i<0&&(i=0);var r=0;t.elements.forEach(function(t,n){"arc"===t.type?t.length=t.radians*e.config.baseRadius:"line"===t.type&&(t.length=i*(t.percent/100)),t.length=Math.round(t.length),r+=t.length});var o=0;t.elements.forEach(function(e,n){e.minutes=Math.floor(e.length/r*1440),o+=e.minutes,n==t.elements.length-1&&o<1440&&(o-=e.minutes,e.minutes=1440-o,o+=e.minutes)}),1440!=o&&console.warn("bad things might happen"),t.elements=t.elements.filter(function(e){return e.minutes>0}),t.elements.forEach(function(n,a){0===a?n.start=0:a>0&&(n.start=t.elements[a-1].end),n.end=e.helpers.limit(n.start+n.minutes)});var s={x:e.w/2,y:e.h/2};t.elements.forEach(function(e,n){0===n?(e.startPoint=s,e.endPoint=s):"arc"===e.type?(e.startPoint=t.elements[n-1].endPoint,e.endPoint=t.elements[n-1].endPoint):"line"===e.type&&(e.startPoint=t.elements[n-1].endPoint),"line"===e.type&&(e.endPoint={x:e.startPoint.x+Math.cos(e.startAngle)*e.length,y:e.startPoint.y+Math.sin(e.startAngle)*e.length})});var c={};t.elements.forEach(function(e,t){n(e.startPoint),n(e.endPoint)}),c.down=e.h-c.down,c.right=e.w-c.right;var l=(c.left-c.right)/2,u=(c.up-c.down)/2;t.elements.forEach(function(e,t){e.startPoint={x:e.startPoint.x-l,y:e.startPoint.y-u},e.endPoint={x:e.endPoint.x-l,y:e.endPoint.y-u}}),t.lanes=[];for(var d=e.data.lanes,f=e.config.maxLaneSize,h=e.config.laneMaxRadius-e.config.laneMinRadius,v=Math.min(f,h/d),m=h-v*d+e.config.laneMinRadius,p=0;p<d;p++)t.lanes.push({start:m+v*p,end:m+v*(p+1)});return t}},function(e,t,n){var a={};n(3)(a),n(4)(a),n(5)(a),n(6)(a),n(7)(a),n(8)(a),n(11)(a),n(24)(a),e.exports=a},function(e,t,n){"use strict";e.exports=function(e){var t=e.helpers={};t.duration=function(e,n){return t.limit(n-e)},t.range=function(e,n,a){return a?t.limit(e-n):t.limit(n-e)},t.minutesToHoursMinutes=function(e){var t=Math.floor(e/60)+"",n=e%60+"";return n=Math.floor(n),{hours:t,minutes:n}},t.minutesToReadable=function(e,n){var a;return void 0===n&&(n=60),e>n?(a=t.minutesToHoursMinutes(e),a.hours+"h "+a.minutes+"m"):e+"m"},t.middlePoint=function(e,n){var a=t.duration(e,n);return t.limit(e+a/2)},t.getProgressBetweenTwoValues=function(e,n,a){var i=t.duration(n,e)/t.duration(n,a);return isNaN(i)?1:i},t.getPositionBetweenTwoValues=t.getProgressBetweenTwoValues,t.limit=function(e){return 1440==e?1440:e-1440*Math.floor(e/1440)},t.shortestWay=function(e){return e>720?e-1440:e<-720?e+1440:e},t.minutesDistance=function(e,n){return Math.min(t.duration(e,n),t.duration(n,e))},t.isInside=function(e,t,n){if(n>t){if(e<n&&e>t)return!0}else if(t>n&&(e>t||e<n))return!0;return e==t||e==n},t.isInsideAngle=function(e,n,a){function i(e){return e%=2*Math.PI,e<0&&(e+=2*Math.PI),e}return t.isInside(i(e),i(n),i(a))},t.distance=function(e,t,n){var t=n.y-t,e=n.x-e;return Math.sqrt(t*t+e*e)},t.angleBetweenTwoPoints=function(e,n,a){var i=t.distance(e,n,a),n=(a.y-n)/i,e=(a.x-e)/i,r=Math.atan(n/e);return e>=0&&(r+=Math.PI),r+=Math.PI/2},t.minutesToClock=function(e){e=Math.floor(e);var t=Math.floor(e/60)+"";return e=e%60+"",1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),t+e},t.distanceFromPointToLine=function(e,t,n,a){var i=n.x,r=n.y,o=a.x,s=a.y,c=e-i,l=t-r,u=o-i,d=s-r,f=c*u+l*d,h=u*u+d*d,v=-1;0!=h&&(v=f/h);var m,p;v<0?(m=i,p=r):v>1?(m=o,p=s):(m=i+v*u,p=r+v*d);var g=e-m,y=t-p;return Math.sqrt(g*g+y*y)},t.each=function(e,n,a,i){var r,o;if(t.isArray(e))if(o=e.length,i)for(r=o-1;r>=0;r--)n.call(a,e[r],r);else for(r=0;r<o;r++)n.call(a,e[r],r);else if("object"==typeof e){var s=Object.keys(e);for(o=s.length,r=0;r<o;r++)n.call(a,e[s[r]],s[r])}},t.deepEach=function(e,n){function a(e,n){if(t.isArray(e))for(var a=0;a<e.length;a++)n(e,e[a],a);else if("object"==typeof e)for(var i=Object.keys(e),a=0;a<i.length;a++)n(e,e[i[a]],i[a])}function i(e,r,o){t.isArray(r)||"object"==typeof r?a(r,i):n(e,r,o)}a(e,i)},t.clone=function(e){return JSON.parse(JSON.stringify(e))},t.extend=function(e){for(var n=arguments,a=function(t,n){e[n]=t},i=1,r=arguments.length;i<r;i++)t.each(n[i],a);return e},t.uid=function(){var e=0;return function(){return e++}}();var n=t.easingEffects={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0===e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1===e?1:1*(1-Math.pow(2,-10*e/1))},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:1==(e/=1)?1:(n||(n=.3),a<Math.abs(1)?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),-a*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n))},easeOutElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:1==(e/=1)?1:(n||(n=.3),a<Math.abs(1)?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),a*Math.pow(2,-10*e)*Math.sin((1*e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:2==(e/=.5)?1:(n||(n=.3*1.5*1),a<Math.abs(1)?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),e<1?a*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)*-.5:a*Math.pow(2,-10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-n.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?7.5625*e*e*1:e<2/2.75?1*(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return e<.5?.5*n.easeInBounce(2*e):.5*n.easeOutBounce(2*e-1)+.5}};t.isArray=Array.isArray?function(e){return Array.isArray(e)}:function(e){return"[object Array]"===Object.prototype.toString.call(e)}}},function(e,t){e.exports=function(e){var t=e.helpers;t.strokeSegment=function(e,n,a,i){var r=e.ctx;r.save(),r.strokeStyle=i.color,r.lineWidth=e.config.bars.general.stroke.lineWidth,r.lineJoin="mittel",t.createSegment(e,i.outerRadius,i.innerRadius,n,a),r.stroke(),r.restore()},t.fillRectRounded=function(e,t,n,a,i){var r=e.config.cornerRadius,o=e.ctx;o.save(),o.strokeStyle=o.fillStyle,o.lineJoin="round",o.lineWidth=r,o.strokeRect(t+r/2,n+r/2,a-r,i-r),o.restore()},t.circle=function(e,t,n){var a=e.ctx;a.beginPath(),a.arc(t.x,t.y,n,0,2*Math.PI),a.closePath()},t.fillCircle=function(e,t,n){var a=e.ctx;this.circle(e,t,n),a.fill()},t.fontSize=function(e,t){return t+"px "+e.config.font}}},function(e,t){e.exports=function(e){var t=e.helpers;t.XYtoInfo=function(e,n,a){var i,r,o=e.shape,s=o.elements.find(function(e){if("arc"===e.type){var i=t.angleBetweenTwoPoints(n,a,e.startPoint);if(i>=e.startAngle&&i<=e.endAngle)return!0}else if("line"===e.type){var r=t.angleBetweenTwoPoints(n,a,e.startPoint),o=t.angleBetweenTwoPoints(n,a,e.endPoint);if(t.isInsideAngle(r,e.startAngle,e.startAngle+Math.PI/2)&&t.isInsideAngle(o,e.startAngle-Math.PI/2,e.startAngle))return!0}return!1});if(void 0===s)throw new Err("uf");var c;if("arc"===s.type){var l=t.angleBetweenTwoPoints(n,a,s.startPoint);c=t.getProgressBetweenTwoValues(l,s.startAngle,s.endAngle)}else if("line"===s.type){var u=t.distanceFromPointToLine(n,a,s.startPoint,s.endPoint),d=t.distance(n,a,s.startPoint),f=Math.sqrt(d*d-u*u);c=f/s.length,isNaN(c)&&(c=0)}var i=t.duration(s.start,s.end)*c+s.start;if("arc"===s.type?r=t.distance(n,a,s.startPoint):"line"===s.type&&(r=t.distanceFromPointToLine(n,a,s.startPoint,s.endPoint)),isNaN(i)||isNaN(r))throw new"ouch";var h=e.shape.lanes,v=h.findIndex(function(e){return r>e.start&&r<e.end});return{minutes:i,distance:r,lane:v}},t.minutesToXY=function(e,n,a){var i=(e.ctx,e.shape),n=t.limit(n),r=i.elements.find(function(e){return t.isInside(n,e.start,e.end)});if(void 0===r)throw console.warn(Object.assign({},e.shape),n,a),new"shapeElement==undefined";var o=t.getProgressBetweenTwoValues(n,r.start,r.end);if("line"===r.type)var s={x:r.startPoint.x+Math.cos(r.startAngle)*o*r.length,y:r.startPoint.y+Math.sin(r.startAngle)*o*r.length},c={x:s.x+Math.cos(r.startAngle-Math.PI/2)*a,y:s.y+Math.sin(r.startAngle-Math.PI/2)*a};else if("arc"===r.type)var l=r.startPoint,u=o*r.radians,c={x:l.x+Math.cos(r.startAngle+u-Math.PI/2)*a,y:l.y+Math.sin(r.startAngle+u-Math.PI/2)*a};return c},t.createCurve=function(e,n,a,i,r,o){function s(n,a){var o=t.clone(e.shape);r&&o.elements.reverse(),n=t.limit(n),a=t.limit(a);var s,l;o.elements.forEach(function(e,i){t.isInside(n,e.start,e.end)&&(s=i),t.isInside(a,e.start,e.end)&&(l=i)});var u,d=[],f=!1;if(u=r?{start:1,end:0}:{start:0,end:1},void 0===s||void 0===l)throw console.log(o,n,a),"error: something is not right here";for(var h=s;h<o.elements.length;h++){var v={shapeElement:o.elements[h],start:u.start,end:u.end};if(h==s&&(v.start=t.getPositionBetweenTwoValues(n,o.elements[h].start,o.elements[h].end)),h==l&&(v.end=t.getPositionBetweenTwoValues(a,o.elements[h].start,o.elements[h].end)),(h==s&&h==l&&v.end>v.start&&r||v.end<v.start&&!r)&&(0==d.length?(v.end=u.end,f=!0):v.start=u.start),d.push(v),h==l){if(!f)break;f=!1}h==o.elements.length-1&&(h=-1)}d.forEach(function(n,a){var o=n.shapeElement;if("arc"===o.type){var s=o.startAngle-Math.PI/2,l=s+n.start*o.radians,u=s+n.end*o.radians;c.arc(o.startPoint.x,o.startPoint.y,i,l,u,r)}else if("line"===o.type){var d=t.minutesToXY(e,o.start+o.minutes*n.start,i),f=t.minutesToXY(e,o.start+o.minutes*n.end,i);c.lineTo(d.x,d.y),c.lineTo(f.x,f.y)}})}var c=e.ctx;if(void 0===r)var r=!1;void 0===o?s(n,a):!e.shapeIsContinous&&n>a?(s(n,1440),o(),e.ctx.beginPath(),s(0,a),o()):(s(n,a),o())},t.createSegment=function(e,n,a,i,r,o){function s(i,r){var o=e.ctx;o.beginPath(),t.createCurve(e,i,r,n),t.createCurve(e,r,i,a,!0),o.closePath()}void 0===o?s(i,r):!e.shapeIsContinous&&i>r?(s(i,1440),o(),s(0,r),o()):(s(i,r),o())}}},function(e,t){e.exports=function(e){e.config={interaction:!0,penMode:!0,responsive:!1,baseRadius:32,edgeRadius:42,font:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',fontSize:1.75,fontColor:"#aaaaaa",background:"transparent",cornerRadius:3,text:!0,drawFace:!0,paddingLanes:.4,laneMaxRadius:36,laneMinRadius:16,maxLaneSize:14,face:{stroke:.15,weakStrokeColor:"#dddddd",weakerStrokeColor:"#f5f5f5",strokeColor:"#aaaaaa",importantStrokeColor:"black",importantLineWidth:.3,numbers:{radius:42,color:"#262626",size:3.3}},content:{handleTimes:{distance:2.5,fontSize:1.75,color:"#999999"},handleTimesActive:{distance:3.5,fontSize:3.25,color:"#4e4e4e"},handles:.6,bigHandles:1.4,textDistance:3,textBoxPadWidth:.9},handlesClickDistance:3,defaultColor:"#EA4335"}}},function(e,t){e.exports=function(e){function t(e){var t=e.canvas;a(e),e.width=e.w=t.width,e.height=e.h=t.height,e.ratio=Math.min(e.w/90,e.h/90),e.config=o(e.unScaledConfig,e.ratio)}function n(t){t.needFullRedraw?(e.draw.fullDraw(t),t.needFullRedraw=!1,t.onUpdate()):e.draw.drawFrame(t)}function a(e){if("undefined"!=typeof window){var t=e.canvas,n=window.devicePixelRatio;if(void 0!==e.config&&e.config.responsive){var a=t.parentNode,i=a.offsetWidth,r=a.offsetHeight;t.width=n*i,t.height=n*r,t.style.width="100%",t.style.height="100%"}else{var r=t.height,i=t.width;t.style.width=i,t.style.height=r,t.width=n*i,t.height=n*r}}}function i(t){return t=t||{},t=s.extend(JSON.parse(JSON.stringify(e.config)),t)}function r(e,t){function n(){return Math.round(1e4*Math.random())}return e.map(function(e){if(void 0===e.start||void 0===e.end)throw new Err("Start and End properties are required!");var e={start:e.start,end:e.end,id:e.id||n(),lane:e.lane||0,text:e.text||"",color:e.color||t.config.defaultColor};return e.lane>t.shape.lanes.length-1&&console.log("Lane no. "+e.lane+" does not exist in this chart"),e})}function o(e,t){function n(e,n,a){(n>1||n<1||1===n)&&(e[a]=n*t)}var a=s.clone(e);return s.deepEach(a,n),a}var s=e.helpers;e.init=function(a,o,c){var l={setHover:function(e,t){this.hoverElement={id:e,type:t},n(this)},isHover:function(e,t){return this.hoverElement.id==e&&this.hoverElement.type==t},isActive:function(e,t){return this.activeElement.elementId==e&&this.activeElement.type==t},setActive:function(e){this.activeElement=e},removeActive:function(){this.activeElement={},n(this)},removeHover:function(){this.hoverElement={},n(this)},setSelected:function(e){this.selectedElement=e,this.onUpdate(),n(this)},isSelected:function(e){return this.selectedElement==e},deselect:function(){this.selectedElement=!1,this.onUpdate(),n(this)},setNumberOfLanes:function(t){this.data.lanes=t,l.needFullRedraw=!0,e.shape.initShape(l),n(this)},isPen:function(){return l.config.penMode&&0==Object.keys(this.hoverElement).length&&0==Object.keys(this.activeElement).length&&this.mousePenLocation},setShape:function(e){},animateShape:function(e){},initAndAddElements:function(e){e=r(e,l),this.data.elements=this.data.elements.concat(e),this.draw()},setElements:function(e){var t=this.helpers;e=e.map(function(e){return Object.assign({},e,{start:t.limit(e.start),end:t.limit(e.end)})}),this.data.elements=e,this.draw()},updateElement:function(e){this.data.elements=this.data.elements.map(function(t){return t.id==e.id?Object.assign(t,e):t}),n(this)},deleteElement:function(e){this.data.elements=this.data.elements.filter(function(t){return t.id!=e}),this.isSelected(e)&&this.deselect(),n(this)},emptyLane:function(e){console.log(e),this.data.elements=this.data.elements.filter(function(t){return t.lane!=e}),console.log(this.data.elements)},createElement:function(e){var t=r([e],this)[0];return l.data.elements.push(t),n(this),t},changeColor:function(e,t){this.data.elements=this.data.elements.map(function(n){return n.id==e?Object.assign({},n,{color:t}):n}),n(this)},draw:function(){n(l)},benchmark:function(){e.draw.benchmark(this)},onSetSelected:function(){},onUpdate:function(){},update:function(e){l.data=e,n(l),console.log("updating")},updateDimensions:function(){t(l),l.needFullRedraw=!0,e.shape.initShape(l),n(this)},changeShape:function(t){e.shape.changeShape(l,t),this.data.shape=t,console.log(this.data)},whichLaneIsTheLastOccupied:function(){var e=0;return l.shape.lanes.forEach(function(t,n){l.data.elements.filter(function(e){return e.lane==n}).length>0&&(e=n)}),e}},u={elements:[],shape:"circle",lanes:1};return l.ctx=a,l.canvas=a.canvas,l.unScaledConfig=i(c),t(l),l.data=s.extend(u,o),l.hoverElement={},l.activeElement={},l.selectedElement=!1,l.mousePenLocation=!1,l.needFullRedraw=!0,l.helpers=e.helpers,l.styles=e.styles,e.shape.initShape(l),e.interactCanvas.init(l),l.data.elements=r(l.data.elements,l),n(l),l}}},function(e,t,n){var a=n(9),i=n(1),r=n(10);e.exports=function(e){function t(e,t){"string"==typeof t&&(o=t,t=a[t]),e.shape=i(e,t)}function n(e,t){function n(){var t=s.clone(a[i]),l=s.clone(a[o[c]]),u={count:o.length};r(e,t,l,u,function(){i=o[c],++c<o.length&&n()})}var i=e.data.shape,o=[t];"circle"==i?"line"==t&&(o=["transitionShape","line"]):"wide"==i?"line"==t&&(o=["circle","transitionShape","line"]):"line"==i&&("wide"==t?o=["transitionShape","circle","wide"]:"circle"==t&&(o=["transitionShape","circle"]));var c=0;n()}var o,s=e.helpers;e.shape={initShape:function(e){t(e,e.data.shape)},changeShape:function(e,t){n(e,t)}}}},function(e,t){e.exports={miniCircle:{elements:[{type:"arc",radians:Math.PI},{type:"line",percent:0},{type:"arc",radians:Math.PI},{type:"line",percent:0}]},circle:{elements:[{type:"arc",radians:Math.PI},{type:"line",percent:0},{type:"arc",radians:Math.PI},{type:"line",percent:0}]},line:{elements:[{type:"line",percent:100}]},wide:{elements:[{type:"arc",radians:Math.PI},{type:"line",percent:100},{type:"arc",radians:Math.PI},{type:"line",percent:100}],shift:0},transitionShape:{elements:[{type:"arc",radians:Math.PI/6}],shift:0}}},function(e,t,n){var a=n(1);e.exports=function(e,t,n,i,r){function o(){var t=Date.now(),i=Math.min(1,(t-u)/l);i=s(i),n.elements.forEach(function(e,t){var n=e.animation.end-e.animation.start;e[e.animation.property]=e.animation.start+n*i});var c=n.shiftAnimation.end-n.shiftAnimation.start;n.shift=n.shiftAnimation.start+c*i,e.shape=a(e,JSON.parse(JSON.stringify(n))),e.needFullRedraw=!0,e.draw(),i<1?window.requestAnimationFrame(o):r()}function s(e){return c.easingEffects.easeInOutQuad(e)}var c=e.helpers;n.elements.forEach(function(e){if("line"==e.type)var n="percent";else var n="radians";var a=t.elements.find(function(n,a){if(e.type===n.type)return t.elements.splice(a,1)});void 0===a&&(a={type:e.type},a[n]=0),e.animation={start:a[n],end:e[n],property:n}}),t.elements.forEach(function(e){if("line"==e.type)var t="percent";else var t="radians";n.elements.push({type:e.type,animation:{start:e[t],end:0,property:t}})}),n.shiftAnimation={start:t.shift,end:n.shift};var l=350,u=Date.now();o()}},function(e,t,n){e.exports=function(e){function t(t){var n=t.ctx;if(n.font=t.config.fontSize+"px "+t.config.font,n.textAlign="center",n.textBaseline="middle",o(t),"undefined"==typeof document)c.forEach(function(e){e(t,t.ctx)}),s.forEach(function(e){e(t,t.ctx)});else{e.draw.ocanvas=document.createElement("canvas"),e.draw.ocanvas.width=t.width,e.draw.ocanvas.height=t.height;var i=e.draw.ocanvas.getContext("2d"),r=Object.assign({},t,{ctx:i});c.forEach(function(e){e(r,i)}),a(t)}}function a(t){o(t),s.forEach(function(n){n(t,e)})}function i(t){var n=Date.now();for(task in s){for(var a=Date.now(),i=0;i<1e3;i++)s[task](t,e);var r=Date.now();console.log(task+" x 1000 "+(r-a)+" ms")}var o=Date.now();console.log("Total: "+(o-n)+" ms"),console.log("One round: "+(o-n)/1e3+" ms")}var r=n(0);e.draw={fullDraw:t,drawFrame:a,benchmark:i};var o=n(12),s=[function(t){void 0!==e.draw.ocanvas&&t.ctx.drawImage(e.draw.ocanvas,0,0)},n(13),n(14),n(15),n(16),n(17),n(18),n(19),r.writeAll],c=[n(20),n(21),n(22),n(23)]}},function(e,t){e.exports=function(e){e.ctx.clearRect(0,0,e.w,e.h)}},function(e,t){e.exports=function(e){var t=e.ctx,n=e.helpers,a=e.config;e.data.elements.forEach(function(i){var r=e.shape.lanes[i.lane];t.save(),t.fillStyle=i.color,e.isActive(i.id,"middle")&&(t.globalAlpha=.9),n.createSegment(e,r.end-a.paddingLanes,r.start+a.paddingLanes,i.start,i.end,function(){t.fill()}),t.restore()})}},function(e,t){e.exports=function(e){var t=e.ctx,n=e.helpers,a=e.config,i=e.data,r=i.elements.find(function(t){return t.id==e.selectedElement});if(void 0!==r){var o=e.shape.lanes[r.lane];t.save();["start","end"].forEach(function(i){var s=n.minutesToXY(e,r[i],o.end-a.paddingLanes);t.globalAlpha=.5,t.fillStyle=r.color,n.circle(e,s,a.content.handles),t.fill(),(e.isHover(r.id,i)||e.isActive(r.id,i))&&(t.globalAlpha=.2,t.fillStyle=r.color,n.circle(e,s,a.handlesClickDistance),t.fill())}),t.restore()}}},function(e,t,n){var a=n(0);e.exports=function(e){var t=e.ctx,n=e.helpers,i=e.config;i.text&&e.data.elements.forEach(function(r){var o=e.shape.lanes[r.lane];t.save(),["start","end"].forEach(function(s){var c=i.content.handleTimes,l=o.end+c.distance;if(0==r.lane)var l=o.start-c.distance;t.fillStyle=c.color;var u=n.minutesToXY(e,r[s],l);a.string(n.minutesToClock(r[s]),u.x,u.y,{size:i.content.handleTimes.fontSize,color:i.content.handleTimes.color})}),t.restore()})}},function(e,t,n){var a=n(0);e.exports=function(e){var t=e.ctx,n=e.helpers;e.config.text&&e.data.elements.forEach(function(i){if(0!=i.text.length){var r=e.shape.lanes[i.lane];t.save();var o=n.middlePoint(i.start,i.end);n.duration(i.start,i.end)<90&&(o=Math.max(o,i.start+40));var s=r.end+e.config.content.textDistance;if(0==i.lane)var s=r.start-e.config.content.textDistance;var c=n.minutesToXY(e,o,s);a.string(i.text,c.x,c.y,{size:e.config.fontSize,color:"white",background:i.color}),t.restore()}})}},function(e,t,n){var a=n(0);e.exports=function(e){var t=e.ctx,n=e.helpers,i=e.config;i.text&&e.data.elements.forEach(function(r){var o=e.shape.lanes[r.lane];t.save();var s=n.middlePoint(r.start,r.end),c=(o.start+o.end)/2,l=n.minutesToXY(e,s,c),u=n.minutesToReadable(n.duration(r.start,r.end));a.string(u,l.x,l.y,{size:i.content.handleTimes.fontSize,color:"white",background:r.color,roundedCorners:!0}),t.restore()})}},function(e,t){e.exports=function(e){function t(t){var r=e.shape.lanes[t[0].lane];n.save(),n.fillStyle=i.face.strokeColor,t=t.sort(function(e,t){return e.start-t.start}),n.strokeStyle=i.face.weakStrokeColor;var o=[];t.forEach(function(e,n){if(n==t.length-1)var a=t[0];else var a=t[n+1];o.push({start:e.end,end:a.start})});var s=r.start+(r.end-r.start)/3,c=r.start+2*(r.end-r.start)/3;o.forEach(function(t){var i=a.duration(t.start,t.end),r=a.minutesToReadable(i,120);if(i>=60){var o=a.limit(t.start+15),l=a.limit(t.end-15),u=a.limit(o+i/2);n.beginPath(),a.createCurve(e,o,l,s,!1,function(){n.stroke()});var d=a.minutesToXY(e,u-10,c);n.fillText(r,d.x,d.y)}}),n.restore()}var n=e.ctx,a=e.helpers,i=e.config;e.shape.lanes.forEach(function(n,a){var i=e.data.elements.filter(function(e){return e.lane==a});i.forEach(function(n){e.isSelected(n.id)&&t(i)})})}},function(e,t){e.exports=function(e){var t=e.ctx,n=e.helpers,a=e.config;if(e.isPen()){var i=e.mousePenLocation.minutes,r=e.shape.lanes[e.mousePenLocation.lane];t.save(),t.fillStyle=e.config.defaultColor,t.globalAlpha=.5,n.createSegment(e,r.end-a.paddingLanes,r.start+a.paddingLanes,i-1,i+1,function(){t.fill()}),t.restore()}}},function(e,t){e.exports=function(e,t){"transparent"!=e.config.background&&(t.save(),t.fillStyle=e.config.background,t.fillRect(0,0,e.w,e.h),t.restore())}},function(e,t){e.exports=function(e,t){var n=e.shape.lanes,a=e.helpers;if(e.config.drawFace){t.lineWidth=e.config.face.stroke,t.strokeStyle=e.config.face.strokeColor,t.save(),t.strokeStyle=e.config.face.weakerStrokeColor;for(var i=0;i<n.length-1;i++)t.beginPath(),a.createCurve(e,.01,1439.9,n[i].end),t.stroke(),t.setLineDash([]);t.restore(),t.beginPath(),a.createCurve(e,.01,1439.9,n[0].start),t.stroke(),t.beginPath(),a.createCurve(e,.01,1439.9,n[n.length-1].end),t.stroke()}}},function(e,t){e.exports=function(e,t){var n=e.helpers,a=e.config,i=e.shape.lanes;if(a.drawFace){t.lineWidth=a.face.stroke,t.save(),t.strokeStyle=a.face.weakStrokeColor,t.setLineDash([2,4]),t.beginPath();for(var r=0;r<=24;r++)if(24!=r||!e.shapeIsContinous){var o=n.minutesToXY(e,60*r,i[0].start),s=n.minutesToXY(e,60*r,i[i.length-1].end);t.moveTo(o.x,o.y),t.lineTo(s.x,s.y)}t.stroke(),t.setLineDash([]),t.restore()}}},function(e,t){e.exports=function(e,t){var n=e.helpers,a=e.config;if(a.drawFace){t.save(),t.font=n.fontSize(e,a.face.numbers.size),t.fillStyle=a.face.numbers.color,t.textAlign="center",t.textBaseline="middle";for(var i=0;i<=24;i+=4){if(24==i&&e.shapeIsContinous)return;var r=n.minutesToXY(e,60*i,a.face.numbers.radius);t.fillText(i,r.x,r.y)}t.restore()}}},function(e,t,n){var a=n(25),i=n(26);e.exports=function(e){function t(e,t){g=d(e);var i=a(t,f(g,t));if(0==Object.keys(i).length)return t.isPen()&&n(e,t),void m(t);e.stopPropagation(),e.preventDefault(),t.setActive(i),v(t,i.elementId),c(t)}function n(e,t){s(e,t),t.listeningForPenMove=!0}function r(e,t){var n=t.helpers;g=d(e);var i=f(g,t);if(t.listeningForPenMove){var r=t.mousePenLocation.minutes,o=n.XYtoInfo(t,i.x,i.y),u=o.minutes,v=n.duration(r,u);if(!(v>5&&v<1435))return;var m=v>720?"start":"end",p="end"==m?"start":"end",y={lane:t.mousePenLocation.lane};if(y[p]=r,y[m]=h(u),l(t,y.start,y.end,y.lane))return;var x=t.createElement(y);t.setActive({elementId:x.id,type:m}),t.setSelected(x.id),t.listeningForPenMove=!1}var w=a(t,i);0==Object.keys(w).length?(s(e,t),t.removeHover()):t.setHover(w.elementId,w.type),c(t)}function o(e,t){if(Object.keys(t.activeElement).length>0){var n=t.activeElement.elementId,a=t.data.elements.find(function(e){return e.id==n});0==p.duration(a.start,a.end)&&t.deleteElement(n)}t.removeActive(),t.listeningForPenMove=!1,t.onUpdate()}function s(e,t){g=d(e);var n=f(g,t),a=t.helpers,i=a.XYtoInfo(t,n.x,n.y);-1==i.lane?t.mousePenLocation=!1:t.mousePenLocation={minutes:h(i.minutes),lane:i.lane}}function c(e){var t=e.activeElement;if(Object.keys(t).length>0){var n=f(g,e),a=p.XYtoInfo(e,n.x,n.y);!function(t,n){var a=e.data.elements.find(function(e){return e.id==t.elementId}),i={id:a.id};if("middle"==t.type){var r=n.distance,o=e.shape.lanes,s=o.findIndex(function(e,t){return r>e.start&&r<=e.end||0===t&&r<=e.start||t===o.length-1&&r>e.end||void 0});if(s!=a.lane){var c=l(e,a.start,a.end,s,a.id);c||(i.lane=s)}}if("start"==t.type||"end"==t.type){var d=h(Math.round(n.minutes));if("start"==t.type)var f=d,v=a.end;else var f=a.start,v=d;var c=u(e,f,v,a.lane,a.id,t.type);c&&(d="start"==t.type?p.duration(d,c.end)>720?v:c.end:p.duration(c.start,d)>720?f:c.start),a[t.type]!=d&&(i[t.type]=d)}else{a.duration=p.duration(a.start,a.end);var m=t.positionInElement;void 0===m&&(m=a.duration/2);var f=h(p.limit(Math.round(n.minutes-m))),v=p.limit(f+a.duration),c=l(e,f,v,a.lane,a.id);if(c){var g=e.data.elements.filter(function(e){return e.lane==c.lane&&e.id!=a.id}).sort(function(e,t){return e.start-t.start}),y=p.limit(n.minutes-m+a.duration/2),x=g.map(function(e,t){return t==g.length-1?{start:e.end,end:g[0].start}:{start:e.end,end:g[t+1].start}}).map(function(e){return e.space=p.duration(e.start,e.end),e}).filter(function(e){return e.space>=a.duration}),w=x.reduce(function(e,t){var n=p.minutesDistance(t.start,y),a=p.minutesDistance(t.end,y);if(n<a)var i="start",r=n;else var i="end",r=a;return r<e.distance?Object.assign({},t,{distance:r,startOrEnd:i}):e},{distance:1440});"start"==w.startOrEnd?(f=w.start,v=f+p.duration(a.start,a.end)):(v=w.end,f=v-p.duration(a.start,a.end))}window.chart=e,a.start==f&&a.end==v||(i.start=p.limit(f),i.end=p.limit(v))}Object.keys(i).length>1&&e.updateElement(i)}(t,a)}}function l(e,t,n,a,i){var r=e.data.elements.find(function(e){return i!=e.id&&((p.isInside(e.start+1,t,n)||p.isInside(e.end-1,t,n)||p.isInside(t,e.start+1,e.end-1))&&e.lane===a)});return void 0!==r&&r}function u(e,t,n,a,i,r){var o="end"==r?"start":"end";if(e.data.elements.some(function(e){return i!=e.id&&((p.isInside(e.start+1,t,n)||p.isInside(e.end-1,t,n)||p.isInside(t,e.start+1,e.end-1))&&e.lane===a)})){var s={start:t,end:n};return e.data.elements.reduce(function(e,t){if(i==t.id)return e;var n="start"==r,a=p.range(s[o],t[o],n);return a<e.distance?Object.assign({},t,{distance:a}):e},{distance:1440})}return!1}function d(e){return void 0!==e.touches?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}function f(e,t){var n=t.canvas.getBoundingClientRect(),a="undefined"!=typeof window?window.devicePixelRatio:1;return{x:(e.x-n.left)*a,y:(e.y-n.top)*a}}function h(e){return 5*Math.round(e/5)}function v(e,t){e.setSelected(t)}function m(e,t){void 0===t&&e.deselect(),e.deselect(t)}var p=e.helpers;e.interactCanvas={init:function(e){function n(e,t,n){t.split(" ").forEach(function(t){e.addEventListener(t,n)})}e.config.interaction&&(n(document,"mousemove touchmove",function(t){e.data.activeElement&&(t.stopPropagation(),t.preventDefault()),r(t,e)}),n(e.canvas,"mousedown touchstart",function(n){t(n,e)}),n(window,"mouseup touchend",function(t){o(t,e)}),i.init(e))}};var g}},function(e,t){e.exports=function(e,t){var n,a=(e.canvas,e.data),i=e.helpers,r={};if(a.elements.forEach(function(a){var o=e.shape.lanes[a.lane];e.isSelected(a.id)&&["start","end"].forEach(function(s){var c=i.minutesToXY(e,a[s],o.end);(n=i.distance(c.x,c.y,t))<e.config.handlesClickDistance&&(void 0===r.distance||n<r.distance)&&(r={elementId:a.id,type:s,distance:n})})}),0==Object.keys(r).length){var o=i.XYtoInfo(e,t.x,t.y);a.elements.forEach(function(t){var n=e.shape.lanes[t.lane];if(i.isInside(o.minutes,t.start,t.end)){var a=n.start,s=n.end;o.distance>a&&o.distance<s&&(r={elementId:t.id,type:"middle",positionInElement:o.minutes-t.start})}})}return r}},function(e,t){e.exports={init:function(e){function t(t){if(e.selectedElement){var n=e.data.elements.find(function(t){return t.id==e.selectedElement}).text;switch(console.log(t,n),t){case 8:n=n.slice(0,-1);break;default:n+=String.fromCharCode(t)}console.log({id:e.selectedElement,text:n}),e.updateElement({id:e.selectedElement,text:n})}}document.onkeydown=function(t){t=t||window.event,46==t.keyCode&&e.selectedElement&&e.deleteElement(e.selectedElement)},window.addEventListener("keypress",function(e){t(e.keyCode)}),window.addEventListener("keydown",function(e){switch(e.keyCode){case 8:e.preventDefault(),t(e.keyCode)}})}}}]);